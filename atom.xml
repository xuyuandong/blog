<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Mr X's blog]]></title>
  <link href="http://xuyuandong.github.io/blog/atom.xml" rel="self"/>
  <link href="http://xuyuandong.github.io/blog/"/>
  <updated>2014-11-07T23:42:21+08:00</updated>
  <id>http://xuyuandong.github.io/blog/</id>
  <author>
    <name><![CDATA[XuYuandong]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[基于模型的CTR预估与ETL]]></title>
    <link href="http://xuyuandong.github.io/blog/blog/2014/11/07/model-etl/"/>
    <updated>2014-11-07T12:21:44+08:00</updated>
    <id>http://xuyuandong.github.io/blog/blog/2014/11/07/model-etl</id>
    <content type="html"><![CDATA[<hr />

<p>在广告和推荐业务中，让人感觉最核心和高大上的一块就是CTR（点击率）预估。基于机器学习模型的CTR预估，说白了就是利用已有的投放数据（包括曝光和点击日志）学习出一组参数表示的函数，输入我们认为对CTR有影响的因素（特征），函数给出我们一个估计出的CTR结果，因此，基于模型的CTR预估主要工作时对特征的研究和对模型的研究。</p>

<p>由于广告、搜索的业务每家公司都不太一样，涉及到的场景会有所区别，因此对问题的建模也会有所不同，这不但衍生出了机器学习模型本身的变化（我们将再另一篇里专门讨论），更多的不同都体现在了对业务数据的处理，即是对特征的处理，尽可能把问题在特征层面规约到几个标准化的机器学习问题上。这篇文章将以CTR预估最常用的LR模型为例，主要讨论在大数据情况下具体实战时，该怎么建立整个数据处理、模型训练和效果预估流程，这些更多是ETL层面的问题。</p>

<ul>
<li><strong>LR模型</strong></li>
</ul>


<p>有人问我为什么CTR预估最常用LR模型，我想先思考一下这个问题的特点：<br/>
1. 训练标签是离散的0或1<br/>
2. 输出要求是[0~1]之间的概率<br/>
3. 其他原因，如线性模型学习效率上的优点等</p>

<p>对于点击或不点击这种事情，天然满足二项分布的似然损失函数：<br/>
$$
-log(F) = -\frac{1}{n} \sum_{i=1}^n \left[y_i \log(p_i) + (1 - y_i)\log(1 - p_i)\right]
$$</p>

<p>其中二项分布中的预测概率是逻辑函数<br/>
$$
Pr(y=1|x,w) = \frac{1}{1 + exp(-w^{T}x)}<br/>
$$
时，这就是逻辑回归（LR）模型了。通常为了防止过拟合，会在损失函数上加入正则项，L2正则项相当于给二项分布似然函数加上了高斯分布的先验，L1正则项相当于加入拉普拉斯先验。此外，需要指出的是逻辑回归中使用的特征一般要求是二值类别特征，即0/1特征。</p>

<ul>
<li><strong>准备数据</strong></li>
</ul>


<p>对于CTR预估来讲，根据数据动态变化情况不同，需要准备短至7天，长达1年的训练数据；数据是按天分区的，首先要分析一下数据中每日新增的广告或商品的比例，以及数据中新增率、天然点击率的周期性，这些对于选择时间窗口是非常有意义的。</p>

<p>假如我们有8天的训练数据，选择时间窗口为7天，我们则按照时间先后顺序，将数据划分为训练集（前7天），测试集（后1天），对于机器学习领域提到的验证集（主要是用来调超参数用的），可以用训练集数据再划分做交叉验证的方法，或者直接划出部分测试集。</p>

<p>在实战中，一旦建立起模型并应用于线上，验证集一般就不需要了，除非模型除了大偏差需要重调，否则既浪费时间模型又不稳定。测试集一般也是不存在的，因为上线时总是希望用全部最新的数据去训练。Google提出过一种progressive validation的方法，使用Online Learning时可以边训练边测试评估，评估结果能够在一定程度上表征模型的好坏，我们再另一篇专门讨论模型的文章中会再提到。</p>

<p>由于上线后模型每天都要跑，所以数据的收集和整理一定要是增量式的，流程上采用一个滚动时间窗口的机制，可以减少处理数据的时间，加速模型的更新速度，提高效果。如果广告或商品的新增速度过快，每日更新模型都不足以保证效果的实时性，就需要小时级更新的模型或者实时模型；对于小时级模型，建议与每日模型分别批量训练并在使用策略上做模型混合；对于实时模型，整个ETL流程都是在线增量计算的，工程实现上会有较大区别，但思想上是一致，所以本文主要是谈批量的ETL处理流程。</p>

<ul>
<li><strong>数据格式</strong></li>
</ul>


<p>一般大公司都会用Hadoop家族的开源工具来管理自己的数据仓库，因此建议使用hive来管理自己的曝光、点击日志，生成的训练数据格式可以包括：0/1标签信息，曝光环境，广告信息，用户信息等四类信息。其中，<br/>
曝光环境包括：流量来源、网络环境、页面上下文属性等；<br/>
广告信息包括：广告和创意、广告计划、广告主的ID和相关属性，越具体越好；<br/>
用户信息包括：人口属性、短期长期兴趣标签、和当前广告的互动频次等，越具体越好；</p>

<ul>
<li><strong>特征处理</strong></li>
</ul>


<p>首先，需要明确偏置特征因子，怎么明确呢？想象一下我们的CTR预估使用场景，当某个广告位上某个用户访问时，需要从一组广告中选择一个CTR最高的投放出去，在这个场景下，曝光上下文环境和用户都是确定的，只有广告可以变化，所以上下文和用户特征就是偏置因子，它们对候选集合来说是不变的，只决定CTR的整体大小水平，不决定相对区分力。</p>

<p>单独把偏置因素纳入到训练数据的特征集合是没有意义的，因为在使用时它们不能起到区别作用。解决这个问题有2种方法，一种是在模型建模时就把偏置因素考虑进去，这将形成对LR模型的一个变种；另一种办法是把偏置因素和广告进行交叉组合，形成联合特征，每个联合的特征才能表示当前广告在特征偏置条件下的一个特征；考虑上下文-用户-广告的三联合甚至更多维的联合，将导致特征数量迅速膨胀，但每种特征都是很细化的一种情况，统计不一定充分，整体日志量相比特征集合大小也得不充分了，每条样本包含的特征数量占据整体特征集合非常小的一部分，这就形成了CTR预估的高维稀疏的数据问题，因而给机器学习领域造成了一定的挑战。</p>

<p>做特征处理时，我一般会先对样本的交叉特征出现的正负样本数进行统计，每一类交叉特征中识别出有容易造成过拟合的问题特征，进行过滤掉部分问题样本。对于不充分统计的特征，可以考虑进行按特征联合的层次进行聚类，不充分的特征归约到一起，如果整层都不充分就归约到上一层，这样不但可以降低特征维度，也可以防止这类特征权重学习不充分导致的过拟合。此外，对于连续数值形特征，需要做离散区间化处理，归为2值特征，这样一能减少特征维度，二能更好描述非线性状态空间。关于特征变换和离散化是一个可以进一步挖掘的问题，我将在另外一篇博客中单独来讨论。</p>

<p>下面我们考虑用MapReduce实现这个过程：可以考虑在Map阶段完成从原始训练数据按照配置文件进行联合交叉特征的生成，然后发送给Reduce阶段；可以设置Partition方法按照特征类别进行分区，在Reduce阶段设置Grouping方法把需要层次聚类的一组特征划到同一个reduce阶段，进而完成特征的聚类、特征变换和离散化处理等过程。</p>

<ul>
<li><strong>多任务学习</strong></li>
</ul>


<p>实际业务中，广告和商品投放在不同的流量来源位置是很常见的，不同位置带来的流量可能有2种情况：一是人群分布相同或相似，二是人群分布差异很大；</p>

<p>对于第一种情况，流量对应的人群差异不大，位置主要影响了曝光的可见性，造成点击率整体上有偏置差异，但对CTR的相对分布影响不大。这种问题建议修改建模方式，如采用transfer learning，position normalization之类的策略，能够利用上全部训练数据做模型学习，取得的效果会更好。这部分我将在专门讨论模型的文章中说明。</p>

<p>对于第二种情况，就需要分别做处理，比如分位置做训练，把每个位置的CTR预估看成一个独立的问题解决。其实，也可以一起训练，但是要求所有特征都要和位置ID做联合，这样可以在优化时起到隔离作用；这样可以在一次优化过程中完成多任务学习。</p>

<p><em>结合VW的训练过程</em></p>

<p>VW是Vowpal Wabbit缩写，是工业界常用的一个开源机器学习工具，支持在Hadoop上对大规模数据使用AllReduce方式分布式训练机器学习模型。使用VW需要将训练样本转换成其要求的格式，更多的详情可以参考：<a href="https://github.com/JohnLangford/vowpal_wabbit/wiki">https://github.com/JohnLangford/vowpal_wabbit/wiki</a></p>

<p>首先，我们需要把特征进行编号（特征ID化），目的是在优化损失函数时，各个维度互不冲突。使用MapReduce的处理方式，可以对上一小节的联合特征处理结果在Map阶段按照资源位置进行分发，在Reduce阶段顺序编号。这样可以保证同一个资源位（同一个学习任务）内的特征ID互不冲突，使用资源位ID作为特征名字空间，能够保证即使所有位置一起优化，也不会彼此干扰。</p>

<p>然后，我们使用ID化之后的特征对原始训练数据进行编码，生成VW需要的格式;因为特征文件也是很大规模的数据，因此需要用MapReduce的多路输入方式，按资源位进行分发，在Reduce阶段进行特征ID与样本数据的关联和格式转换，形成可用的样本。</p>

<p>最后，直接使用VW提供的脚本即可完成模型的学习。</p>

<ul>
<li><strong>样本倾斜</strong></li>
</ul>


<p>众所周知，广告或推荐的点击数据相比曝光数量是非常小的，这样我们的训练样本中正样本的比例也是非常小的（常常 &lt; 1%），这种情况被成为样本倾斜。一些机器学习算法是对正负样本比例敏感的，好在我们使用的逻辑回归模型并不如此。不过从以下几个角度考虑，我们还是要讨论一下负样本采样的重要性：<br/>
1. 降低训练数据的规模，加速模型学习过程<br/>
2. 负样本中抽样能够使训练过程泛化能力更强，有助于减少测试集上的误差<br/>
对于第二点，我认为主要是解决了非常不充分的噪声特征，减少了模型过拟合的可能性，但是绝大部分情况下良好的模型选择和数据清洗过程才是保证泛化能力的关键，因此加速模型学习效率是考虑样本下采样的关键因素。</p>

<p>对负样本的下采样其实是模型训练效率与准确率之间的一种trade off，原理上其实是不会改变预估结果的，负样本抽样的原理如下：<br/>
$$
\frac{P(y=1|x)}{P(y=-1|x)} = \frac{P(x|y=1)P(y=1)}{P(x|y=-1)P(y=-1)} = \frac{P&#8217;(x|y=1)P&#8217;(y=1)}{P&#8217;(x|y=-1)P(y=-1)/r} = r \frac{P&#8217;(y=1|x)}{P&#8217;(y=-1|x)}
$$<br/>
上面等式成立的前提是负样本采样不改变类别的条件概率分布：$P(x|y)=P&#8217;(x|y)$ 。这样，进行采样后，我们的负对数损失函数会被降低 $log r$ ，有2种办法解决这个问题：<br/>
1. 训练完成模型后，在预测时将模型权重线性加和后，在加上 $log r$ 做补偿；
2. 训练过程中，对采样后保留下来的负样本提升 $1/r$ 权重，从而保证损失函数不变；<br/>
实践中，第一种处理方法的泛化能力比较好，方法二得到的模型在测试集上并不理想，可能的解释是对样本进行重要性加权的做法会破坏了原本的泛化错误边界。</p>

<ul>
<li><p><strong>评价指标</strong></p></li>
<li><p><strong>特征选择</strong></p></li>
<li><p><strong>一些可以讨论的问题</strong></p>

<p><em>反馈特征</em></p>

<p><em>CTR .vs. CVR</em></p>

<p><em>模型后处理</em></p></li>
</ul>


<p class='post-footer'>
            原文地址
            <a href='http://xuyuandong.github.io/blog/blog/2014/11/07/model-etl/'>http://xuyuandong.github.io/blog/blog/2014/11/07/model-etl/</a><br/>
            &nbsp;written by <a href='http://xuyuandong.github.io/blog'>XuYuandong</a>
            &nbsp;posted at <a href='http://xuyuandong.github.io/blog'>http://xuyuandong.github.io/blog</a>
            </p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[浅析RTB广告中的出价模型]]></title>
    <link href="http://xuyuandong.github.io/blog/blog/2014/11/06/bid-model/"/>
    <updated>2014-11-06T12:24:02+08:00</updated>
    <id>http://xuyuandong.github.io/blog/blog/2014/11/06/bid-model</id>
    <content type="html"><![CDATA[<p>to be updated<p class='post-footer'>
            原文地址
            <a href='http://xuyuandong.github.io/blog/blog/2014/11/06/bid-model/'><a href="http://xuyuandong.github.io/blog/blog/2014/11/06/bid-model/">http://xuyuandong.github.io/blog/blog/2014/11/06/bid-model/</a></a><br/>
            &nbsp;written by <a href='http://xuyuandong.github.io/blog'>XuYuandong</a>
            &nbsp;posted at <a href='http://xuyuandong.github.io/blog'><a href="http://xuyuandong.github.io/blog">http://xuyuandong.github.io/blog</a></a>
            </p></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[特征变换与离散化]]></title>
    <link href="http://xuyuandong.github.io/blog/blog/2014/11/06/feature-transformation/"/>
    <updated>2014-11-06T12:23:52+08:00</updated>
    <id>http://xuyuandong.github.io/blog/blog/2014/11/06/feature-transformation</id>
    <content type="html"><![CDATA[<p>to be updated<p class='post-footer'>
            原文地址
            <a href='http://xuyuandong.github.io/blog/blog/2014/11/06/feature-transformation/'><a href="http://xuyuandong.github.io/blog/blog/2014/11/06/feature-transformation/">http://xuyuandong.github.io/blog/blog/2014/11/06/feature-transformation/</a></a><br/>
            &nbsp;written by <a href='http://xuyuandong.github.io/blog'>XuYuandong</a>
            &nbsp;posted at <a href='http://xuyuandong.github.io/blog'><a href="http://xuyuandong.github.io/blog">http://xuyuandong.github.io/blog</a></a>
            </p></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[流量分配与规划算法]]></title>
    <link href="http://xuyuandong.github.io/blog/blog/2014/11/06/allocation/"/>
    <updated>2014-11-06T12:23:35+08:00</updated>
    <id>http://xuyuandong.github.io/blog/blog/2014/11/06/allocation</id>
    <content type="html"><![CDATA[<p>to be updated<p class='post-footer'>
            原文地址
            <a href='http://xuyuandong.github.io/blog/blog/2014/11/06/allocation/'><a href="http://xuyuandong.github.io/blog/blog/2014/11/06/allocation/">http://xuyuandong.github.io/blog/blog/2014/11/06/allocation/</a></a><br/>
            &nbsp;written by <a href='http://xuyuandong.github.io/blog'>XuYuandong</a>
            &nbsp;posted at <a href='http://xuyuandong.github.io/blog'><a href="http://xuyuandong.github.io/blog">http://xuyuandong.github.io/blog</a></a>
            </p></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[矩阵分解在广告、推荐技术中的应用]]></title>
    <link href="http://xuyuandong.github.io/blog/blog/2014/11/06/matrix-factorization/"/>
    <updated>2014-11-06T12:23:15+08:00</updated>
    <id>http://xuyuandong.github.io/blog/blog/2014/11/06/matrix-factorization</id>
    <content type="html"><![CDATA[<p>to be updated<p class='post-footer'>
            原文地址
            <a href='http://xuyuandong.github.io/blog/blog/2014/11/06/matrix-factorization/'><a href="http://xuyuandong.github.io/blog/blog/2014/11/06/matrix-factorization/">http://xuyuandong.github.io/blog/blog/2014/11/06/matrix-factorization/</a></a><br/>
            &nbsp;written by <a href='http://xuyuandong.github.io/blog'>XuYuandong</a>
            &nbsp;posted at <a href='http://xuyuandong.github.io/blog'><a href="http://xuyuandong.github.io/blog">http://xuyuandong.github.io/blog</a></a>
            </p></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[预算平滑与在线分配策略]]></title>
    <link href="http://xuyuandong.github.io/blog/blog/2014/11/06/budget-smooth/"/>
    <updated>2014-11-06T12:22:43+08:00</updated>
    <id>http://xuyuandong.github.io/blog/blog/2014/11/06/budget-smooth</id>
    <content type="html"><![CDATA[<p>to be updated<p class='post-footer'>
            原文地址
            <a href='http://xuyuandong.github.io/blog/blog/2014/11/06/budget-smooth/'><a href="http://xuyuandong.github.io/blog/blog/2014/11/06/budget-smooth/">http://xuyuandong.github.io/blog/blog/2014/11/06/budget-smooth/</a></a><br/>
            &nbsp;written by <a href='http://xuyuandong.github.io/blog'>XuYuandong</a>
            &nbsp;posted at <a href='http://xuyuandong.github.io/blog'><a href="http://xuyuandong.github.io/blog">http://xuyuandong.github.io/blog</a></a>
            </p></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[利用社交网络与行为定向建立用户模型]]></title>
    <link href="http://xuyuandong.github.io/blog/blog/2014/11/06/user-profile/"/>
    <updated>2014-11-06T12:22:34+08:00</updated>
    <id>http://xuyuandong.github.io/blog/blog/2014/11/06/user-profile</id>
    <content type="html"><![CDATA[<p>to be updated<p class='post-footer'>
            原文地址
            <a href='http://xuyuandong.github.io/blog/blog/2014/11/06/user-profile/'><a href="http://xuyuandong.github.io/blog/blog/2014/11/06/user-profile/">http://xuyuandong.github.io/blog/blog/2014/11/06/user-profile/</a></a><br/>
            &nbsp;written by <a href='http://xuyuandong.github.io/blog'>XuYuandong</a>
            &nbsp;posted at <a href='http://xuyuandong.github.io/blog'><a href="http://xuyuandong.github.io/blog">http://xuyuandong.github.io/blog</a></a>
            </p></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[基于统计的CTR预估与实时计算]]></title>
    <link href="http://xuyuandong.github.io/blog/blog/2014/11/06/statistics-ctr/"/>
    <updated>2014-11-06T12:22:24+08:00</updated>
    <id>http://xuyuandong.github.io/blog/blog/2014/11/06/statistics-ctr</id>
    <content type="html"><![CDATA[<p>to be updated<p class='post-footer'>
            原文地址
            <a href='http://xuyuandong.github.io/blog/blog/2014/11/06/statistics-ctr/'><a href="http://xuyuandong.github.io/blog/blog/2014/11/06/statistics-ctr/">http://xuyuandong.github.io/blog/blog/2014/11/06/statistics-ctr/</a></a><br/>
            &nbsp;written by <a href='http://xuyuandong.github.io/blog'>XuYuandong</a>
            &nbsp;posted at <a href='http://xuyuandong.github.io/blog'><a href="http://xuyuandong.github.io/blog">http://xuyuandong.github.io/blog</a></a>
            </p></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[点击率预估的机器学习模型及具体应用中的变种]]></title>
    <link href="http://xuyuandong.github.io/blog/blog/2014/11/06/prediction-model/"/>
    <updated>2014-11-06T12:21:57+08:00</updated>
    <id>http://xuyuandong.github.io/blog/blog/2014/11/06/prediction-model</id>
    <content type="html"><![CDATA[<p>to be updated<p class='post-footer'>
            原文地址
            <a href='http://xuyuandong.github.io/blog/blog/2014/11/06/prediction-model/'><a href="http://xuyuandong.github.io/blog/blog/2014/11/06/prediction-model/">http://xuyuandong.github.io/blog/blog/2014/11/06/prediction-model/</a></a><br/>
            &nbsp;written by <a href='http://xuyuandong.github.io/blog'>XuYuandong</a>
            &nbsp;posted at <a href='http://xuyuandong.github.io/blog'><a href="http://xuyuandong.github.io/blog">http://xuyuandong.github.io/blog</a></a>
            </p></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[广告在线投放中的排序与冷启动技术]]></title>
    <link href="http://xuyuandong.github.io/blog/blog/2014/11/06/explore-sort/"/>
    <updated>2014-11-06T12:21:21+08:00</updated>
    <id>http://xuyuandong.github.io/blog/blog/2014/11/06/explore-sort</id>
    <content type="html"><![CDATA[<p>to be updated<p class='post-footer'>
            原文地址
            <a href='http://xuyuandong.github.io/blog/blog/2014/11/06/explore-sort/'><a href="http://xuyuandong.github.io/blog/blog/2014/11/06/explore-sort/">http://xuyuandong.github.io/blog/blog/2014/11/06/explore-sort/</a></a><br/>
            &nbsp;written by <a href='http://xuyuandong.github.io/blog'>XuYuandong</a>
            &nbsp;posted at <a href='http://xuyuandong.github.io/blog'><a href="http://xuyuandong.github.io/blog">http://xuyuandong.github.io/blog</a></a>
            </p></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[程序化购买下的广告技术架构]]></title>
    <link href="http://xuyuandong.github.io/blog/blog/2014/11/06/architecture/"/>
    <updated>2014-11-06T12:21:01+08:00</updated>
    <id>http://xuyuandong.github.io/blog/blog/2014/11/06/architecture</id>
    <content type="html"><![CDATA[<p>to be updated<p class='post-footer'>
            原文地址
            <a href='http://xuyuandong.github.io/blog/blog/2014/11/06/architecture/'><a href="http://xuyuandong.github.io/blog/blog/2014/11/06/architecture/">http://xuyuandong.github.io/blog/blog/2014/11/06/architecture/</a></a><br/>
            &nbsp;written by <a href='http://xuyuandong.github.io/blog'>XuYuandong</a>
            &nbsp;posted at <a href='http://xuyuandong.github.io/blog'><a href="http://xuyuandong.github.io/blog">http://xuyuandong.github.io/blog</a></a>
            </p></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[高维度下的流量预估技术]]></title>
    <link href="http://xuyuandong.github.io/blog/blog/2014/11/06/forcast/"/>
    <updated>2014-11-06T12:20:26+08:00</updated>
    <id>http://xuyuandong.github.io/blog/blog/2014/11/06/forcast</id>
    <content type="html"><![CDATA[<p>to be updated<p class='post-footer'>
            原文地址
            <a href='http://xuyuandong.github.io/blog/blog/2014/11/06/forcast/'><a href="http://xuyuandong.github.io/blog/blog/2014/11/06/forcast/">http://xuyuandong.github.io/blog/blog/2014/11/06/forcast/</a></a><br/>
            &nbsp;written by <a href='http://xuyuandong.github.io/blog'>XuYuandong</a>
            &nbsp;posted at <a href='http://xuyuandong.github.io/blog'><a href="http://xuyuandong.github.io/blog">http://xuyuandong.github.io/blog</a></a>
            </p></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[从GitHub启程]]></title>
    <link href="http://xuyuandong.github.io/blog/blog/2014/11/05/post-title/"/>
    <updated>2014-11-05T14:51:57+08:00</updated>
    <id>http://xuyuandong.github.io/blog/blog/2014/11/05/post-title</id>
    <content type="html"><![CDATA[<hr />

<p>步入互联网行业早已超过三年，直到现在才开始建立自己的博客。在学校读书的时候虽然也有过几次写技术博客的日子，但都没有坚持下来，一是因为自己懒于把总结和整理的东西再编辑好发表出来，二是写着写着确实觉得才疏学浅，干货太少。工作之后，进度很快，也更忙碌了，一回首发现几年前接触的东西竟然快忘掉，电脑里只剩下一个个很难再去翻看的文件夹，于是发现，是时候该总结了。</p>

<p>回顾自己工作这几年，做过搜索、推荐、广告的系统架构和数据挖掘，但主要是在搜索、广告的一些关键技术和策略点上进行过深入的思考和开发，总结了一些面上的slides和点上code，这将在github这个平台上一一分享。特别感谢@Easy 让我有动力在github上开博客，而我电脑里这些沉积的资料也大部分是从工作过程中认识的内部的外部的同事朋友以及网络上感觉比较靠谱的分享中学习总结出来的，互联网的开放精神让这个行业飞快的进步，也让每个程序员都因此受益。</p>

<p>本篇我先粗描淡写讲一下如何用github打造个人blog，主要是援引网络上几个博客的内容。</p>

<ol>
<li><p>用github建立blog的原理  </br>
不错，用github写博客就像前端开发，这要从完整的博客系统角度理解。
博客系统需要一个类似CMS的博客站点管理部分，和一个后台的数据库，展示博客时系统会从数据库中获得内容动态形成HTML页面进行前端展示；然而，github和网上类似新浪博客的系统的区别是，他没有一个为博客定制的页面形成系统和数据库，但他是具有版本管理功能的代码仓库，所以我们只能通过把动态形成的页面变成静态页面，然后像代码一样提交给github，浏览博客是通过访问组织好的静态页面完成的。</p></li>
<li><p>配置ruby开发环境  </br>
<em>关键词：brew, ruby, rvm, rbenv, bundler</em><br/>
我个人不懂前端开发，所以也不太了解上面这些东西是什么，基本上就是照着网上一些文章照搬的，中间会发生不少错误，提示缺什么就装什么，基本能够搞定，我完成后看了一下自己的bash history，大致按照这么几条比较重要的命令：<br/>
[安装rvm]<br/>
<code>curl -sSL https://get.rvm.io | bash -s stable</code><br/>
[安装ruby]<br/>
<code>rvm install ruby-2.0.0-p594 &amp;&amp; rvm use 2.0.0</code><br/>
[安装brew]<br/>
<code>ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"</code><br/>
<code>brew tab --repair</code><br/>
<code>brew update</code><br/>
[安装rbenv]<br/>
<code>brew install rbenv</code><br/>
<code>rbenv rehash</code><br/>
[按照bundler]<br/>
<code>gem update --system</code><br/>
<code>gem install bundler</code><br/>
<code>bundle install</code><br/>
到这里基本上装完了，不同系统由于曾经有过安装或者版本问题导致安装的过程都不会完全顺利，装成与否就看下一步octopress配置是否成功</p></li>
<li><p>配置和使用octopress  </br>
octopress是一个开发HTML静态页面网站的系统，在这个系统内我们只需要编辑MarkDown文件的内容就好了，页面风格主题之类的都交给octopress配置一下执行几个命令就能生成HTML静态页面网站，包括那些css，js文件等等，octopress可以和github关联起来，把静态页面网站提交给github，我们就可以通过github访问建好的博客站点了。<br/>
[注册个人github账号]<br/>
这一步就上github网站安装提示一步步来吧<br/>
[创建github上的blog项目]<br/>
按照这个链接来，有截图<a href="http://blog.csdn.net/renfufei/article/details/37725057  ">http://blog.csdn.net/renfufei/article/details/37725057  </a>
你会获得一个blog访问地址，比如：xxx.github.io/blog/<br/>
[下载并配置octopress]<br/>
<code>git clone git://github.com/imathis/octopress.git ~/dev/octopress</code> <br/>
<code>cd ~/dev/octopress</code>  <br/>
<code>rake install</code><br/>
<code>git remote add blog git@xxx.git</code> <br/>
[写第一篇blog]<br/>
<code>rake new_post["my first blog title"]</code><br/>
然后到~/dev/octopress/source/_posts/下找到对应的markdown文件编辑这篇博客<br/>
[生成静态网站]<br/>
<code>rake generate</code><br/>
[关联对应的git项目]<br/>
<code>rake setup_github_pages</code><br/>
[在4000端口预览]<br/>
<code>rake preview</code><br/>
[发布到github上]<br/>
<code>rake deploy</code></p></li>
</ol>


<p>到此大功告成，不过后面不断发布博客的过程中，还会遇到很多问题，比如git的版本管理问题，blog的格式问题，越多的问题就越要了解一些各方面的知识，比如git的使用，markdown语法，octopress的原理等等。</p>

<p>最后，希望本博客能够坚持写下去，发布更多搜索、推荐、广告、和数据挖掘相关内容！！！</p>

<p class='post-footer'>
            原文地址
            <a href='http://xuyuandong.github.io/blog/blog/2014/11/05/post-title/'>http://xuyuandong.github.io/blog/blog/2014/11/05/post-title/</a><br/>
            &nbsp;written by <a href='http://xuyuandong.github.io/blog'>XuYuandong</a>
            &nbsp;posted at <a href='http://xuyuandong.github.io/blog'>http://xuyuandong.github.io/blog</a>
            </p>

]]></content>
  </entry>
  
</feed>
